---
title: Geyser 自托管 Paper / Spigot 设置
description: 了解如何在您的自托管 Paper 或 Spigot 服务器上设置 Geyser。
---

import { Versions } from '@site/src/components/Versions'

:::info
如果您的服务器未运行 <Versions platform="java"/>, 您需要安装 <a href="https://viaversion.com/">ViaVersion</a>。
另请参阅[此页面](/wiki/geyser/supported-versions/)了解支持的版本。
:::

1. 从[下载页面](/download)下载插件。
2. 将 Geyser-Spigot.jar 放入 `plugins` 文件夹，然后重启服务器。
3. 打开您的 Geyser 配置文件，位于 `/plugins/Geyser-Spigot/config.yml`，找到以下内容：

    ```yaml
    bedrock: 
        # 将监听连接的 IP 地址。
        # 通常，只有在您想限制哪些 IP 可以连接到您的服务器时才应取消注释并更改此项。
        #address: 0.0.0.0 

        # 将监听连接的端口。这是基岩版玩家用来连接到您服务器的端口。
        port: 19132 
    ```
    关键部分是端口。这是基岩版玩家用来连接到您服务器的端口！
    如果您启用 `clone-remote-port`，端口将被覆盖并使用 Java 端口。
    由于您是自托管，您可以自由选择端口 - 默认端口是 19132。   
    **重要**：其他依赖 UDP 端口的服务/插件，例如语音聊天或查询，不能与 Geyser 共享端口。
     

4. 连接到您的服务器
        
    **在同一网络内本地连接**   
    在与服务器相同的设备上，您可以使用 `localhost` 或 `127.0.0.1` 作为地址进行连接。
    注意：在同一 Windows 设备上托管和游玩时，您需要[环回修复](/wiki/geyser/fixing-unable-to-connect-to-world#using-geyser-on-the-same-computer)。
    同一本地网络中的其他设备可以使用您的本地 IPv4 进行连接 - 它以 `10.` 或 `192.168.` 开头。
        
    **从不同网络连接**  
    如果您希望网络外的玩家加入，您需要将 Geyser 运行的端口暴露到互联网。
    为此，您有两个选项：   

    - 端口转发：在路由器/调制解调器和 Windows/Linux 防火墙中打开 Geyser 端口（例如 19132）的 UDP 协议。
   [我们的端口转发指南](/wiki/geyser/port-forwarding)详细解释了如何执行此操作。
   完成此操作后，玩家可以使用您的公共 IPv4 + 端口连接到您的服务器。   

    - playit.gg：如果不想打开端口（这可能不是一个选项/如果您不想暴露您的家庭 IP），您可以使用
   playit.gg 服务为您创建隧道来路由流量。请参阅我们的 [playit.gg 指南](/wiki/geyser/playit-gg)。
   Ngrok 将无法工作，因为它仅支持 TCP。   

5. 通过在控制台中运行 `geyser connectiontest <ip> <port>` 来验证是否可以从其他网络进行连接。

:::caution
要允许基岩版玩家无需登录付费 Java 版账户即可加入您的服务器，您可以使用 <a href="/wiki/floodgate/setup/">Floodgate</a>。
:::
